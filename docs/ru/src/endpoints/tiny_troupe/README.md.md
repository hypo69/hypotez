# TinyTroupe: LLM-powered multiagent persona simulation

## Обзор

*TinyTroupe* - это экспериментальная Python-библиотека, предназначенная для **симуляции** людей с определенными личностями, интересами и целями. Эти искусственные агенты, *TinyPerson*s, могут слушать друг друга и пользователей, отвечать и проживать свои жизни в симулированных средах *TinyWorld*. Это достигается благодаря использованию больших языковых моделей (LLM), в частности GPT-4, для генерации реалистичного симулированного поведения. *TinyTroupe* направлена на **улучшение человеческого воображения** и получение **бизнес-инсайтов**.

## Подробней

*TinyTroupe* предоставляет возможность исследовать широкий спектр **убедительных взаимодействий** и **типов потребителей** с **широко настраиваемыми персонажами** в **выбранных условиях**. В отличие от других *игровых* подходов к симуляции на основе LLM, *TinyTroupe* стремится к освещению сценариев повышения производительности и бизнеса, тем самым способствуя более успешным проектам и продуктам.
Вот некоторые идеи применения для **расширения человеческого воображения**:

- **Реклама:** *TinyTroupe* может **оценивать цифровые рекламные объявления (например, Bing Ads)** в автономном режиме с помощью симулированной аудитории перед тем, как тратить на них деньги!
- **Тестирование программного обеспечения:** *TinyTroupe* может **предоставлять тестовые входные данные** для систем (например, поисковых систем, чат-ботов или copilot) и затем **оценивать результаты**.
- **Обучение и разведочные данные:** *TinyTroupe* может генерировать реалистичные **синтетические данные**, которые позже можно использовать для обучения моделей или подвергать анализу возможностей.
- **Управление продуктами и проектами:** *TinyTroupe* может **читать предложения по проектам или продуктам** и **давать обратную связь** с точки зрения **конкретных персонажей** (например, врачей, юристов и работников умственного труда в целом).
- **Мозговой штурм:** *TinyTroupe* может имитировать **фокус-группы** и предоставлять отличную обратную связь по продукту за небольшую плату!

## Содержание

- [Последние новости](#latest-news)
- [Примеры](#examples)
- [Предварительные требования](#pre-requisites)
- [Установка](#installation)
- [Принципы](#principles)
- [Структура проекта](#project-structure)
- [Использование библиотеки](#using-the-library)
- [Вклад](#contributing)
- [Благодарности](#acknowledgements)
- [Цитирование TinyTroupe](#how-to-cite-tinytroupe)
- [Юридическая оговорка](#legal-disclaimer)
- [Торговые марки](#trademarks)

## Последние новости

**[2025-01-29] Выпуск 0.4.0 с различными улучшениями. Основные моменты:**

- Персонажи теперь имеют более глубокие спецификации, включая черты характера, предпочтения, убеждения и многое другое.
- `TinyPerson`s теперь можно определять как JSON-файлы, и загружать через `TinyPerson.load_specification()`
- Вводится понятие *фрагментов* для повторного использования элементов персонажа в разных агентах.
- Вводятся логические `Proposition`s на основе LLM, для облегчения мониторинга поведения агента.
- Вводятся `Intervention`s, для возможности указания модификаций симуляции на основе событий.
- Подмодули теперь имеют свои собственные папки для лучшей организации и роста.

## Примеры

### Пример 1

Симуляция простого сценария интервью с клиентом, где бизнес-консультант обращается к банкиру.

### Пример 2

Оценка вариантов онлайн-рекламы для выбора лучшего.

### Пример 3

Фокус-группа начинает мозговой штурм о новых функциях искусственного интеллекта для Microsoft Word.

## Предварительные требования

Для запуска библиотеки необходимо:

- Python 3.10 или выше.
- Доступ к Azure OpenAI Service или Open AI GPT-4 API.
- Переменные среды `AZURE_OPENAI_KEY` и `AZURE_OPENAI_ENDPOINT` для Azure OpenAI Service.
- Переменная среды `OPENAI_API_KEY` для OpenAI API.
- Файл `config.ini` для настройки параметров API, модели и уровня логирования.

## Установка

Рекомендуемый способ установки библиотеки - непосредственно из этого репозитория, а не из PyPI.

1.  Клонируйте репозиторий:

    ```bash
    git clone https://github.com/microsoft/tinytroupe
    cd tinytroupe
    ```
2.  Создайте новую среду Python:

    ```bash
    conda create -n tinytroupe python=3.10
    ```
3.  Активируйте среду:

    ```bash
    conda activate tinytroupe
    ```
4.  Установите библиотеку из репозитория:

    ```bash
    pip install git+https://github.com/microsoft/TinyTroupe.git@main
    ```

## Принципы

*TinyTroupe* следует следующим принципам:

1.  **Программность**: агенты и среды определяются программно (на Python и JSON).
2.  **Аналитичность**: улучшение понимания людей, пользователей и общества.
3.  **Персональность**: агенты являются архетипическими представлениями людей.
4.  **Многоагентность**: взаимодействие между агентами в заданных условиях.
5.  **Утилитарность**: механизмы для спецификаций, симуляций, извлечений, отчетов, валидаций.
6.  **Экспериментальность**: итеративное определение, запуск, анализ и уточнение симуляций.

## Структура проекта

Проект имеет следующую структуру:

- `/tinytroupe`: Python-библиотека.
- `/tests`: модульные тесты.
- `/examples`: примеры использования библиотеки.
- `/data`: данные, используемые примерами или библиотекой.
- `/docs`: документация проекта.

## Использование библиотеки

*TinyTroupe* предоставляет две ключевые абстракции:

- `TinyPerson`: *агенты* с личностью, получающие стимулы и действующие на их основе.
- `TinyWorld`: *среда*, в которой существуют и взаимодействуют агенты.

### TinyPerson

`TinyPerson` — это класс, представляющий собой симулированного человека с определенными чертами характера, интересами и целями.

#### TinyPersonFactory

`TinyPersonFactory` позволяет генерировать новых агентов, используя LLM для создания их спецификаций.

#### Фрагменты

`TinyPerson` можно обогатить с помощью **фрагментов**, которые представляют собой подспецификации, которые можно добавить к основной спецификации.

### TinyWorld

`TinyWorld` — базовый класс для сред.

### Утилиты

*TinyTroupe* предоставляет ряд утилит и удобств для создания симуляций и извлечения из них ценности:

- `TinyPersonFactory`: помогает генерировать новых `TinyPerson` с использованием LLM.
- `TinyTool`: имитированные инструменты, которые могут использоваться `TinyPerson`.
- `TinyStory`: помогает создавать и управлять историей, рассказанной с помощью симуляций.
- `TinyPersonValidator`: помогает проверять поведение ваших `TinyPerson`.
- `ResultsExtractor` и `ResultsReducer`: извлекают и уменьшают результаты взаимодействий между агентами.

### Кэширование

*TinyTroupe* поставляется с двумя механизмами кэширования: один для состояния моделирования, другой для вызовов LLM.

#### Кэширование состояния симуляции

Для кэширования состояния симуляции используются методы:

- `control.begin("<CACHE_FILE_NAME>.cache.json")`: начинает запись изменений состояния симуляции.
- `control.checkpoint()`: сохраняет состояние симуляции.
- `control.end()`: завершает запись состояния симуляции.

#### Кэширование вызовов LLM API

Кэширование вызовов LLM API включается в файле `config.ini` или с помощью `openai_utils.force_api_cache()`.

### Config.ini

Файл `config.ini` содержит параметры для настройки поведения библиотеки, такие как параметры модели и уровень логирования.

## Вклад

Этот проект приветствует вклады и предложения.

## Благодарности

*TinyTroupe* началась как внутренний проект хакатона Microsoft.

## Цитирование TinyTroupe

Мы работаем над вводной статьей, которая станет официальной академической цитатой для TinyTroupe.

## Юридическая оговорка

TinyTroupe предназначена только для исследований и симуляций.

## Торговые марки

Этот проект может содержать товарные знаки или логотипы проектов, продуктов или услуг.