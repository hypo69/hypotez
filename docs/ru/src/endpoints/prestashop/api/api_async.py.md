# –ú–æ–¥—É–ª—å –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API PrestaShop
========================================================

–ú–æ–¥—É–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª–∞—Å—Å `PrestaShopAsync`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API PrestaShop,
–≤–∫–ª—é—á–∞—è –æ–ø–µ—Ä–∞—Ü–∏–∏ CRUD, –ø–æ–∏—Å–∫ –∏ –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

## –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API PrestaShop, –ø–æ–∑–≤–æ–ª—è—è –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ —Å–æ–∑–¥–∞–Ω–∏–µ, —á—Ç–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –∞ —Ç–∞–∫–∂–µ –ø–æ–∏—Å–∫ –∏ –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π. –û–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã –∏ –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

## –ü–æ–¥—Ä–æ–±–Ω–µ–µ

–ú–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–ª–∞—Å—Å `PrestaShopAsync`, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API PrestaShop. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É `aiohttp` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö JSON –∏ XML. –ö–ª–∞—Å—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π CRUD, –ø–æ–∏—Å–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤, –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö API.

## –ö–ª–∞—Å—Å—ã

### `Format`

```python
class Format(Enum):
    """Data types return (JSON, XML)

    .. deprecated::
        I prefer JSON üëç :))

    :param Enum: (int): 1 => JSON, 2 => XML
    """
    JSON = 'JSON'
    XML = 'XML'
```

**–û–ø–∏—Å–∞–Ω–∏–µ**: Enum, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API (JSON, XML).

**–ê—Ç—Ä–∏–±—É—Ç—ã**:
- `JSON`: –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç JSON.
- `XML`: –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç XML.

### `PrestaShopAsync`

```python
class PrestaShopAsync:
    """! Async Class for interacting with the PrestaShop API using JSON and XML.

    This class provides asynchronous methods to interact with the PrestaShop API,
    allowing for CRUD operations, searching, and uploading images. It also provides
    error handling for responses and methods to handle the API's data.

    Example usage:

    .. code-block:: python

        async def main():
            api = PrestaShopAsync(
                API_DOMAIN='https://your-prestashop-domain.com',
                API_KEY='your_api_key',
                default_lang=1,
                debug=True,
                data_format='JSON',
            )

            await api.ping()

            data = {
                'tax': {
                    'rate': 3.000,
                    'active': '1',
                    'name': {
                        'language': {
                            'attrs': {'id': '1'},
                            'value': '3% tax'
                        }
                    }
                }
            }

            # Create tax record
            rec = await api.create('taxes', data)

            # Update the same tax record
            update_data = {
                'tax': {
                    'id': str(rec['id']),
                    'rate': 3.000,
                    'active': '1',
                    'name': {
                        'language': {
                            'attrs': {'id': '1'},
                            'value': '3% tax'
                        }
                    }
                }
            }

            update_rec = await api.write('taxes', update_data)

            # Remove this tax
            await api.unlink('taxes', str(rec['id']))

            # Search the first 3 taxes with '5' in the name
            import pprint
            recs = await api.search('taxes', filter='[name]=%[5]%', limit='3')

            for rec in recs:
                pprint(rec)

            # Create binary (product image)
            await api.create_binary('images/products/22', 'img.jpeg', 'image')

        if __name__ == "__main__":
            asyncio.run(main())

    """
    client: ClientSession = None
    debug = False
    lang_index: Optional[int] = 1
    data_format:str = 'JSON'
    ps_version = ''
    API_DOMAIN:str = None
    API_KEY:str = None
```

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API PrestaShop —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º JSON –∏ XML.

**–ê—Ç—Ä–∏–±—É—Ç—ã**:
- `client` (ClientSession): –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π HTTP-–∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤.
- `debug` (bool): –§–ª–∞–≥ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞ –æ—Ç–ª–∞–¥–∫–∏.
- `lang_index` (Optional[int]): –ò–Ω–¥–µ–∫—Å —è–∑—ã–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
- `data_format` (str): –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ('JSON' –∏–ª–∏ 'XML').
- `ps_version` (str): –í–µ—Ä—Å–∏—è PrestaShop.
- `API_DOMAIN` (str): –î–æ–º–µ–Ω API PrestaShop.
- `API_KEY` (str): –ö–ª—é—á API PrestaShop.

**–ú–µ—Ç–æ–¥—ã**:
- `__init__`: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Å `PrestaShopAsync`.
- `ping`: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤–µ–±-—Å–µ—Ä–≤–∏—Å–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- `_check_response`: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- `_parse_response_error`: –†–∞–∑–±–∏—Ä–∞–µ—Ç –æ—Ç–≤–µ—Ç –æ–± –æ—à–∏–±–∫–µ –æ—Ç API PrestaShop –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- `_prepare`: –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç URL –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞.
- `_exec`: –í—ã–ø–æ–ª–Ω—è–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å –∫ API PrestaShop –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- `_parse`: –†–∞–∑–±–∏—Ä–∞–µ—Ç XML –∏–ª–∏ JSON –æ—Ç–≤–µ—Ç –æ—Ç API –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- `create`: –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Ä–µ—Å—É—Ä—Å –≤ API PrestaShop –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- `read`: –ß–∏—Ç–∞–µ—Ç —Ä–µ—Å—É—Ä—Å –∏–∑ API PrestaShop –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- `write`: –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ä–µ—Å—É—Ä—Å –≤ API PrestaShop –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- `unlink`: –£–¥–∞–ª—è–µ—Ç —Ä–µ—Å—É—Ä—Å –∏–∑ API PrestaShop –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- `search`: –ò—â–µ—Ç —Ä–µ—Å—É—Ä—Å—ã –≤ API PrestaShop –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- `create_binary`: –ó–∞–≥—Ä—É–∂–∞–µ—Ç –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª –≤ —Ä–µ—Å—É—Ä—Å API PrestaShop –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- `_save`: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª.
- `get_data`: –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ä–µ—Å—É—Ä—Å–∞ API PrestaShop –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- `remove_file`: –£–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª –∏–∑ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã.
- `get_apis`: –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö API –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- `get_languages_schema`: –ü–æ–ª—É—á–∞–µ—Ç —Å—Ö–µ–º—É –¥–ª—è —è–∑—ã–∫–æ–≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- `upload_image_async`: –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ API PrestaShop –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- `upload_image`: –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ API PrestaShop –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- `get_product_images`: –ü–æ–ª—É—á–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

## –§—É–Ω–∫—Ü–∏–∏

### `__init__`

```python
def __init__(self,
                api_domain:str,
                api_key:str,
                data_format: str = 'JSON',
                debug: bool = True) -> None:
    """! Initialize the PrestaShopAsync class.

    Args:
        data_format (str, optional): Default data format ('JSON' or 'XML'). Defaults to 'JSON'.
        default_lang (int, optional): Default language ID. Defaults to 1.
        debug (bool, optional): Activate debug mode. Defaults to True.

    Raises:
        PrestaShopAuthenticationError: When the API key is wrong or does not exist.
        PrestaShopException: For generic PrestaShop WebServices errors.
    """
    self.API_DOMAIN = api_domain
    self.API_KEY = api_key
    self.debug = debug
    self.data_format = data_format

    self.client = ClientSession(
        auth=aiohttp.BasicAuth(self.API_KEY, ''),
        timeout=ClientTimeout(total=60)
    )
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞ `PrestaShopAsync`.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `api_domain` (str): –î–æ–º–µ–Ω API PrestaShop.
- `api_key` (str): –ö–ª—é—á API PrestaShop.
- `data_format` (str, optional): –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ('JSON' –∏–ª–∏ 'XML'). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 'JSON'.
- `debug` (bool, optional): –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `True`.

**–í—ã–∑—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è**:
- `PrestaShopAuthenticationError`: –ï—Å–ª–∏ –∫–ª—é—á API –Ω–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
- `PrestaShopException`: –î–ª—è –æ–±—â–∏—Ö –æ—à–∏–±–æ–∫ –≤–µ–±-—Å–µ—Ä–≤–∏—Å–æ–≤ PrestaShop.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è**:
1. –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–∞–º —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞ –∏–∑ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤.
2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π HTTP-–∫–ª–∏–µ–Ω—Ç `ClientSession` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ API-–∫–ª—é—á–∞ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–∞–π–º–∞—É—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤.

```
A: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∫–ª–∞—Å—Å–∞
|
-- B: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ HTTP-–∫–ª–∏–µ–Ω—Ç–∞
```

**–ü—Ä–∏–º–µ—Ä—ã**:

```python
api = PrestaShopAsync(api_domain='https://your-prestashop-domain.com', api_key='your_api_key', data_format='JSON', debug=True)
```

### `ping`

```python
async def ping(self) -> bool:
    """! Test if the webservice is working perfectly asynchronously.

    Returns:
        bool: Result of the ping test. Returns `True` if the webservice is working, otherwise `False`.
    """
    async with self.client.request(
        method='HEAD',
        url=self.API_DOMAIN
    ) as response:
        return await self._check_response(response.status, response)
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤–µ–±-—Å–µ—Ä–≤–∏—Å–∞ PrestaShop –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- `bool`: –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≤—è–∑–∏. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `True`, –µ—Å–ª–∏ –≤–µ–±-—Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏–Ω–∞—á–µ `False`.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è**:
1. –í—ã–ø–æ–ª–Ω—è–µ—Ç HEAD-–∑–∞–ø—Ä–æ—Å –∫ API_DOMAIN, –∏—Å–ø–æ–ª—å–∑—É—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π HTTP-–∫–ª–∏–µ–Ω—Ç.
2. –ü–µ—Ä–µ–¥–∞–µ—Ç –∫–æ–¥ –æ—Ç–≤–µ—Ç–∞ –∏ –æ–±—ä–µ–∫—Ç –æ—Ç–≤–µ—Ç–∞ –≤ –º–µ—Ç–æ–¥ `_check_response` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.

```
A: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ HEAD-–∑–∞–ø—Ä–æ—Å–∞ –∫ API_DOMAIN
|
-- B: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞ —Å –ø–æ–º–æ—â—å—é _check_response
```

**–ü—Ä–∏–º–µ—Ä—ã**:

```python
async def main():
    api = PrestaShopAsync(api_domain='https://your-prestashop-domain.com', api_key='your_api_key')
    result = await api.ping()
    print(f"Ping result: {result}")
```

### `_check_response`

```python
def _check_response(self, status_code: int, response, method: Optional[str] = None, url: Optional[str] = None,
                        headers: Optional[dict] = None, data: Optional[dict] = None) -> bool:
    """! Check the response status code and handle errors asynchronously.

    Args:
        status_code (int): HTTP response status code.
        response (aiohttp.ClientResponse): HTTP response object.
        method (str, optional): HTTP method used for the request.
        url (str, optional): The URL of the request.
        headers (dict, optional): The headers used in the request.
        data (dict, optional): The data sent in the request.

    Returns:
        bool: `True` if the status code is 200 or 201, otherwise `False`.
    """
    if status_code in (200, 201):
        return True
    else:
        self._parse_response_error(response, method, url, headers, data)
        return False
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `status_code` (int): –ö–æ–¥ —Å–æ—Å—Ç–æ—è–Ω–∏—è HTTP-–æ—Ç–≤–µ—Ç–∞.
- `response` (aiohttp.ClientResponse): –û–±—ä–µ–∫—Ç HTTP-–æ—Ç–≤–µ—Ç–∞.
- `method` (str, optional): HTTP-–º–µ—Ç–æ–¥, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞.
- `url` (str, optional): URL –∑–∞–ø—Ä–æ—Å–∞.
- `headers` (dict, optional): –ó–∞–≥–æ–ª–æ–≤–∫–∏, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –≤ –∑–∞–ø—Ä–æ—Å–µ.
- `data` (dict, optional): –î–∞–Ω–Ω—ã–µ, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ –∑–∞–ø—Ä–æ—Å–µ.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- `bool`: `True`, –µ—Å–ª–∏ –∫–æ–¥ —Å–æ—Å—Ç–æ—è–Ω–∏—è 200 –∏–ª–∏ 201, –∏–Ω–∞—á–µ `False`.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è**:
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ `status_code` –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ (200, 201).
2. –ï—Å–ª–∏ `status_code` –Ω–µ —Ä–∞–≤–µ–Ω 200 –∏–ª–∏ 201, –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ `_parse_response_error` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–∫–∏.

```
A: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è HTTP-–æ—Ç–≤–µ—Ç–∞
|
-- B: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ —Å –ø–æ–º–æ—â—å—é _parse_response_error (–µ—Å–ª–∏ status_code –Ω–µ —Ä–∞–≤–µ–Ω 200 –∏–ª–∏ 201)
```

**–ü—Ä–∏–º–µ—Ä—ã**:

```python
async def main():
    api = PrestaShopAsync(api_domain='https://your-prestashop-domain.com', api_key='your_api_key')
    async with aiohttp.ClientSession() as session:
        async with session.get(api.API_DOMAIN) as response:
            result = api._check_response(response.status, response)
            print(f"Check response result: {result}")
```

### `_parse_response_error`

```python
def _parse_response_error(self, response, method: Optional[str] = None, url: Optional[str] = None,
                              headers: Optional[dict] = None, data: Optional[dict] = None):
    """! Parse the error response from PrestaShop API asynchronously.

    Args:
        response (aiohttp.ClientResponse): HTTP response object from the server.
        method (str, optional): HTTP method used for the request.
        url (str, optional): The URL of the request.
        headers (dict, optional): The headers used in the request.
        data (dict, optional): The data sent in the request.
    """
    if self.data_format == 'JSON':
        status_code = response.status
        if not status_code in (200, 201):
            text = response.text()
            logger.critical(f"""response status code: {status_code}
                url: {response.request_info.url}
                --------------
                headers: {response.headers}
                --------------
                response text: {text}""")
        return response
    else:
        error_answer = self._parse(response.text())
        if isinstance(error_answer, dict):
            error_content = (error_answer
                             .get('PrestaShop', {})
                             .get('errors', {})
                             .get('error', {}))
            if isinstance(error_content, list):
                error_content = error_content[0]
            code = error_content.get('code')
            message = error_content.get('message')
        elif isinstance(error_answer, ElementTree.Element):
            error = error_answer.find('errors/error')
            code = error.find('code').text
            message = error.find('message').text
        logger.error(f'XML response error: {message} \n Code: {code}')
        return code, message
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞–∑–±–æ—Ä –æ—Ç–≤–µ—Ç–∞ –æ–± –æ—à–∏–±–∫–µ –æ—Ç API PrestaShop –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `response` (aiohttp.ClientResponse): –û–±—ä–µ–∫—Ç HTTP-–æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞.
- `method` (str, optional): HTTP-–º–µ—Ç–æ–¥, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞.
- `url` (str, optional): URL –∑–∞–ø—Ä–æ—Å–∞.
- `headers` (dict, optional): –ó–∞–≥–æ–ª–æ–≤–∫–∏, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –≤ –∑–∞–ø—Ä–æ—Å–µ.
- `data` (dict, optional): –î–∞–Ω–Ω—ã–µ, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ –∑–∞–ø—Ä–æ—Å–µ.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è**:
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö (`self.data_format`).
2. –ï—Å–ª–∏ —Ñ–æ—Ä–º–∞—Ç JSON, –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∫–æ–¥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞, –∑–∞—Ç–µ–º –ª–æ–≥–∏—Ä—É–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–µ.
3. –ï—Å–ª–∏ —Ñ–æ—Ä–º–∞—Ç XML, –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ `_parse` –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ XML-–æ—Ç–≤–µ—Ç–∞, –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∫–æ–¥ –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ, –∑–∞—Ç–µ–º –ª–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫—É.

```
A: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö (JSON –∏–ª–∏ XML)
|
-- B1: –ï—Å–ª–∏ JSON: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–¥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Ç–µ–∫—Å—Ç–∞ –æ—Ç–≤–µ—Ç–∞, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—à–∏–±–∫–µ
|
-- B2: –ï—Å–ª–∏ XML: –†–∞–∑–±–æ—Ä XML-–æ—Ç–≤–µ—Ç–∞ —Å –ø–æ–º–æ—â—å—é _parse, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–¥–∞ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
```

**–ü—Ä–∏–º–µ—Ä—ã**:

```python
async def main():
    api = PrestaShopAsync(api_domain='https://your-prestashop-domain.com', api_key='your_api_key')
    async with aiohttp.ClientSession() as session:
        try:
            async with session.get(f'{api.API_DOMAIN}/nonexistent_resource') as response:
                if response.status != 200:
                    api._parse_response_error(response)
        except Exception as ex:
            logger.error(f"Error: {ex}")
```

### `_prepare`

```python
def _prepare(self, url: str, params: dict) -> str:
    """! Prepare the URL for the request.

    Args:
        url (str): The base URL.
        params (dict): The parameters for the request.

    Returns:
        str: The prepared URL with parameters.
    """
    req = PreparedRequest()
    req.prepare_url(url, params)
    return req.url
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ URL –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `url` (str): –ë–∞–∑–æ–≤—ã–π URL.
- `params` (dict): –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- `str`: –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π URL —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è**:
1. –°–æ–∑–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä `PreparedRequest`.
2. –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç URL —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∞–∑–æ–≤–æ–≥–æ URL –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

```
A: –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ PreparedRequest
|
-- B: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ URL —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∞–∑–æ–≤–æ–≥–æ URL –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
```

**–ü—Ä–∏–º–µ—Ä—ã**:

```python
api = PrestaShopAsync(api_domain='https://your-prestashop-domain.com', api_key='your_api_key')
url = api._prepare(api.API_DOMAIN, {'param1': 'value1', 'param2': 'value2'})
print(f"Prepared URL: {url}")
```

### `_exec`

```python
async def _exec(self,
              resource: str,
              resource_id: Optional[Union[int, str]] = None,
              resource_ids: Optional[Union[int, Tuple[int]]] = None,
              method: str = 'GET',
              data: Optional[dict] = None,
              headers: Optional[dict] = None,
              search_filter: Optional[Union[str, dict]] = None,
              display: Optional[Union[str, list]] = 'full',
              schema: Optional[str] = None,
              sort: Optional[str] = None,
              limit: Optional[str] = None,
              language: Optional[int] = None,
              io_format: str = 'JSON') -> Optional[dict]:
    """! Execute an HTTP request to the PrestaShop API asynchronously.

    Args:
        resource (str): The API resource (e.g., 'products', 'categories').
        resource_id (int | str, optional): The ID of the resource.
        resource_ids (int | tuple, optional): The IDs of multiple resources.
        method (str, optional): The HTTP method (GET, POST, PUT, DELETE).
        data (dict, optional): The data to be sent with the request.
        headers (dict, optional): Additional headers for the request.
        search_filter (str | dict, optional): Filter for the request.
        display (str | list, optional): Fields to display in the response.
        schema (str, optional): The schema of the data.
        sort (str, optional): Sorting parameter for the request.
        limit (str, optional): Limit of results for the request.
        language (int, optional): The language ID for the request.
        io_format (str, optional): The data format ('JSON' or 'XML').

    Returns:
        dict | None: The response from the API or `False` on failure.
    """
    self.debug = False
    if self.debug:
        # import sys
        # original_stderr = sys.stderr
        # f = open('stderr.log', 'w')
        # sys.stderr = f
        
        # prepared_url = self._prepare(f'{self.API_DOMAIN}/api/{resource}/{resource_id}' if resource_id else f'{self.API_DOMAIN}/api/{resource}',
        #                       {'filter': search_filter,
        #                        'display': display,
        #                        'schema': schema,
        #                        'sort': sort,
        #                        'limit': limit,
        #                        'language': language,
        #                        'output_format': io_format})
        
        # request_data = dict2xml(data) if data and io_format == 'XML' else data
        
        # with self.client.request(
        #     method=method,
        #     url=prepared_url,
        #     data=request_data,
        #     headers=headers,
        # ) as response:

        #     sys.stderr = original_stderr

        #     if not self._check_response(response.status, response, method, prepared_url, headers, request_data):
        #         return False

        #     if io_format == 'JSON':
        #         return response.json()
        #     else:
        #         return self._parse(await response.text())
        ...
    else:
        prepared_url = self._prepare(f'{self.API_DOMAIN}{resource}/{resource_id}' if resource_id else f'{self.API_DOMAIN}{resource}',
                              {'filter': search_filter,
                               'display': display,
                               'schema': schema,
                               'sort': sort,
                               'limit': limit,
                               'language': language,
                               'output_format': io_format})
        
        request_data = dict2xml(data) if data and io_format == 'XML' else data
        
        with self.client.request(
            method=method,
            url=prepared_url,
            data=request_data,
            headers=headers,
        ) as response:

            if not self._check_response(response.status, response, method, prepared_url, headers, request_data):
                return False

            if io_format == 'JSON':
                return response.json()
            else:
                return self._parse(await response.text())
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ HTTP-–∑–∞–ø—Ä–æ—Å–∞ –∫ API PrestaShop –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `resource` (str): API —Ä–µ—Å—É—Ä—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'products', 'categories').
- `resource_id` (int | str, optional): ID —Ä–µ—Å—É—Ä—Å–∞.
- `resource_ids` (int | tuple, optional): ID –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤.
- `method` (str, optional): HTTP –º–µ—Ç–æ–¥ (GET, POST, PUT, DELETE).
- `data` (dict, optional): –î–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å –∑–∞–ø—Ä–æ—Å–æ–º.
- `headers` (dict, optional): –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞.
- `search_filter` (str | dict, optional): –§–∏–ª—å—Ç—Ä –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞.
- `display` (str | list, optional): –ü–æ–ª—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –æ—Ç–≤–µ—Ç–µ.
- `schema` (str, optional): –°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö.
- `sort` (str, optional): –ü–∞—Ä–∞–º–µ—Ç—Ä —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞.
- `limit` (str, optional): –õ–∏–º–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞.
- `language` (int, optional): ID —è–∑—ã–∫–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞.
- `io_format` (str, optional): –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö ('JSON' –∏–ª–∏ 'XML').

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- `dict | None`: –û—Ç–≤–µ—Ç –æ—Ç API –∏–ª–∏ `False` –≤ —Å–ª—É—á–∞–µ –Ω–µ—É–¥–∞—á–∏.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è**:
1. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `self.debug = False`.
2. –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç URL —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–µ—Ç–æ–¥–∞ `_prepare`.
3. –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ XML, –µ—Å–ª–∏ `data` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –∏ `io_format == 'XML'`.
4. –í—ã–ø–æ–ª–Ω—è–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ HTTP-–∫–ª–∏–µ–Ω—Ç–∞.
5. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç–≤–µ—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–µ—Ç–æ–¥–∞ `_check_response`.
6. –†–∞–∑–±–∏—Ä–∞–µ—Ç –æ—Ç–≤–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –∏–ª–∏ XML.

```
A: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ debug = False
|
-- B: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ URL —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º _prepare
|
-- C: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ XML (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)
|
-- D: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ HTTP-–∑–∞–ø—Ä–æ—Å–∞
|
-- E: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º _check_response
|
-- F: –†–∞–∑–±–æ—Ä –æ—Ç–≤–µ—Ç–∞ (JSON –∏–ª–∏ XML)
```

**–ü—Ä–∏–º–µ—Ä—ã**:

```python
async def main():
    api = PrestaShopAsync(api_domain='https://your-prestashop-domain.com', api_key='your_api_key')
    data = await api._exec(resource='products', method='GET', limit='1')
    print(data)
```

### `_parse`

```python
def _parse(self, text: str) -> dict | ElementTree.Element | bool:
    """! Parse XML or JSON response from the API asynchronously.

    Args:
        text (str): Response text.

    Returns:
        dict | ElementTree.Element | bool: Parsed data or `False` on failure.
    """
    try:
        if self.data_format == 'JSON':
          data = j_loads(text)
          return data.get('PrestaShop', {}) if 'PrestaShop' in data else data
        else:
            tree = ElementTree.fromstring(text)
            return tree
    except (ExpatError, ValueError) as ex:
        logger.error(f'Parsing Error: {str(ex)}')
        return False
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞–∑–±–æ—Ä XML –∏–ª–∏ JSON –æ—Ç–≤–µ—Ç–∞ –æ—Ç API –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `text` (str): –¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- `dict | ElementTree.Element | bool`: –†–∞–∑–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ `False` –≤ —Å–ª—É—á–∞–µ –Ω–µ—É–¥–∞—á–∏.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è**:
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö (`self.data_format`).
2. –ï—Å–ª–∏ —Ñ–æ—Ä–º–∞—Ç JSON, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `j_loads` –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ JSON –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–ª—é—á–∞ 'PrestaShop', –µ—Å–ª–∏ –æ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
3. –ï—Å–ª–∏ —Ñ–æ—Ä–º–∞—Ç XML, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ElementTree.fromstring` –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ XML.
4. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è `ExpatError` –∏ `ValueError` –ø—Ä–∏ —Ä–∞–∑–±–æ—Ä–µ.

```
A: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö (JSON –∏–ª–∏ XML)
|
-- B1: –ï—Å–ª–∏ JSON: –†–∞–∑–±–æ—Ä JSON —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º j_loads
|
-- B2: –ï—Å–ª–∏ XML: –†–∞–∑–±–æ—Ä XML —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ElementTree.fromstring
|
-- C: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –ø—Ä–∏ —Ä–∞–∑–±–æ—Ä–µ
```

**–ü—Ä–∏–º–µ—Ä—ã**:

```python
api = PrestaShopAsync(api_domain='https://your-prestashop-domain.com', api_key='your_api_key', data_format='JSON')
text = '{"PrestaShop": {"key": "value"}}'
data = api._parse(text)
print(data)
```

### `create`

```python
async def create(self, resource: str, data: dict) -> Optional[dict]:
    """! Create a new resource in PrestaShop API asynchronously.

    Args:
        resource (str): API resource (e.g., 'products').
        data (dict): Data for the new resource.

    Returns:
         dict: Response from the API.
    """
    return await self._exec(resource=resource, method='POST', data=data, io_format=self.data_format)
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞ –≤ API PrestaShop –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `resource` (str): API —Ä–µ—Å—É—Ä—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'products').
- `data` (dict): –î–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- `dict`: –û—Ç–≤–µ—Ç –æ—Ç API.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è**:
1. –í—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ `_exec` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `resource`, `method='POST'`, `data` –∏ `io_format=self.data_format`.

```
A: –í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ _exec —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞
```

**–ü—Ä–∏–º–µ—Ä—ã**:

```python
async def main():
    api = PrestaShopAsync(api_domain='https://your-prestashop-domain.com', api_key='your_api_key')
    data = {'product': {'name': 'Test Product'}}
    response = await api.create(resource='products', data=data)
    print(response)
```

### `read`

```python
async def read(self, resource: str, resource_id: Union[int, str], **kwargs) -> Optional[dict]:
    """! Read a resource from the PrestaShop API asynchronously.

    Args:
        resource (str): API resource (e.g., 'products').
        resource_id (int | str): Resource ID.

    Returns:
        dict: Response from the API.
    """
    return await self._exec(resource=resource, resource_id=resource_id, method='GET', io_format= self.data_format)
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ß—Ç–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞ –∏–∑ API PrestaShop –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `resource` (str): API —Ä–µ—Å—É—Ä—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'products').
- `resource_id` (int | str): ID —Ä–µ—Å—É—Ä—Å–∞.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- `dict`: –û—Ç–≤–µ—Ç –æ—Ç API.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è**:
1. –í—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ `_exec` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `resource`, `resource_id`, `method='GET'` –∏ `io_format=self.data_format`.

```
A: –í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ _exec —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –¥–ª—è —á—Ç–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞
```

**–ü—Ä–∏–º–µ—Ä—ã**:

```python
async def main():
    api = PrestaShopAsync(api_domain='https://your-prestashop-domain.com', api_key='your_api_key')
    response = await api.read(resource='products', resource_id=1)
    print(response)
```

### `write`

```python
async def write(self, resource: str, data: dict) -> Optional[dict]:
    """! Update an existing resource in the PrestaShop API asynchronously.

    Args:
        resource (str): API resource (e.g., 'products').
        data (dict): Data for the resource.

    Returns:
        dict: Response from the API.
    """
    return await self._exec(resource=resource, resource_id=data.get('id'), method='PUT', data=data,
                          io_format=self.data_format)
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ä–µ—Å—É—Ä—Å–∞ –≤ API PrestaShop –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `resource` (str): API —Ä–µ—Å—É—Ä—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'products').
- `data` (dict): –î–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ—Å—É—Ä—Å–∞.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- `dict`: –û—Ç–≤–µ—Ç –æ—Ç API.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è**:
1. –í—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ `_exec` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `resource`, `resource_id=data.get('id')`, `method='PUT'`, `data` –∏ `io_format=self.data_format`.

```
A: –í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ _exec —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞
```

**–ü—Ä–∏–º–µ—Ä—ã**:

```python
async def main():
    api = PrestaShopAsync(api_domain='https://your-prestashop-domain.com', api_key='your_api_key')
    data = {'id': 1, 'product': {'name': 'Updated Product'}}
    response = await api.write(resource='products', data=data)
    print(response)
```

### `unlink`

```python
async def unlink(self, resource: str, resource_id: Union[int, str]) -> bool:
    """! Delete a resource from the PrestaShop API asynchronously.

    Args:
        resource (str): API resource (e.g., 'products').
        resource_id (int | str): Resource ID.

    Returns:
        bool: `True` if successful, `False` otherwise.
    """
    return await self._exec(resource=resource, resource_id=resource_id, method='DELETE', io_format=self.data_format)
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞ –∏–∑ API PrestaShop –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `resource` (str): API —Ä–µ—Å—É—Ä—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'products').
- `resource_id` (int | str): ID —Ä–µ—Å—É—Ä—Å–∞.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- `bool`: `True`, –µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ, `False` –∏–Ω–∞—á–µ.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è**:
1. –í—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ `_exec` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `resource`, `resource_id`, `method='DELETE'` –∏ `io_format=self.data_format`.

```
A: –í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ _exec —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞
```

**–ü—Ä–∏–º–µ—Ä—ã**:

```python
async def main():
    api = PrestaShopAsync(api_domain='https://your-prestashop-domain.com', api_key='your_api_key')
    response = await api.unlink(resource='products', resource_id=1)
    print(response)
```

### `search`

```python
async def search(self, resource: str, filter: Optional[Union[str, dict]] = None, **kwargs) -> List[dict]:
    """! Search for resources in the PrestaShop API asynchronously.

    Args:
        resource (str): API resource (e.g., 'products').
        filter (str | dict, optional): Filter for the search.

    Returns:
         List[dict]: List of resources matching the search criteria.
    """
    return await self._exec(resource=resource, search_filter=filter, method='GET', io_format=self.data_format, **kwargs)
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–∏—Å–∫ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ API PrestaShop –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `resource` (str): API —Ä–µ—Å—É—Ä—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'products').
- `filter` (str | dict, optional): –§–∏–ª—å—Ç—Ä –¥–ª—è –ø–æ–∏—Å–∫–∞.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- `List[dict]`: –°–ø–∏—Å–æ–∫ —Ä–µ—Å—É—Ä—Å–æ–≤, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∫—Ä–∏—Ç–µ—Ä–∏—è–º –ø–æ–∏—Å–∫–∞.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è**:
1. –í—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ `_exec` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `resource`, `search_filter=filter`, `method='GET'`, `io_format=self.data_format` –∏ `**kwargs`.

```
A: –í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ _exec —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
```

**–ü—Ä–∏–º–µ—Ä—ã**:

```python
async def main():
    api = PrestaShopAsync(api_domain='https://your-prestashop-domain.com', api_key='your_api_key')
    response = await api.search(resource='products',