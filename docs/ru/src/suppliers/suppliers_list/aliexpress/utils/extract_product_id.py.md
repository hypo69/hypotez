# Модуль `extract_product_id`

## Обзор

Модуль `extract_product_id` предназначен для извлечения идентификаторов товаров (Product IDs) из URL-адресов, полученных с сайта AliExpress. Он также может принимать на вход уже готовые идентификаторы товаров и возвращать их после проверки на валидность. Модуль включает в себя функцию `extract_prod_ids`, которая обрабатывает как отдельные URL, так и списки URL, и использует внутреннюю функцию `extract_id` для извлечения или проверки идентификаторов.

## Подробнее

Этот модуль предоставляет функциональность для автоматического извлечения идентификаторов товаров из URL-адресов AliExpress. Он использует регулярные выражения для поиска и извлечения этих идентификаторов. Если на вход передается список URL, модуль возвращает список извлеченных идентификаторов. Если передается строка, модуль пытается извлечь идентификатор из этой строки.

Расположение модуля в структуре проекта указывает на его использование в рамках работы с поставщиками, а именно с AliExpress. Он может быть использован для автоматизации сбора данных о товарах, мониторинга цен и других задач, связанных с анализом товаров на AliExpress.

## Функции

### `extract_prod_ids`

```python
def extract_prod_ids(urls: str | list[str]) -> str | list[str] | None:
    """ Функция извлекает идентификаторы товаров из списка URL-адресов или возвращает идентификаторы, если они уже предоставлены.

    Args:
        urls (str | list[str]): URL-адрес или список URL-адресов, или идентификаторы продуктов.

    Returns:
        str | list[str] | None: Список извлеченных идентификаторов товаров, один идентификатор или `None`, если не найдено ни одного валидного идентификатора.

    Raises:
        - Отсутствуют явные исключения, но функция может вернуть `None` в случае отсутствия валидных идентификаторов.

    Example:
        >>> extract_prod_ids("https://www.aliexpress.com/item/123456.html")
        '123456'

        >>> extract_prod_ids(["https://www.aliexpress.com/item/123456.html", "7891011.html"])
        ['123456', '7891011']

        >>> extract_prod_ids(["https://www.example.com/item/123456.html", "https://www.example.com/item/abcdef.html"])
        ['123456']

        >>> extract_prod_ids("7891011")
        '7891011'

        >>> extract_prod_ids("https://www.example.com/item/abcdef.html")
        None
    """

```

**Назначение**: Извлечение идентификаторов товаров из URL-адресов или списка URL-адресов, или проверка предоставленных идентификаторов.

**Параметры**:
- `urls` (str | list[str]): URL-адрес, список URL-адресов или идентификаторы товаров.

**Возвращает**:
- `str | list[str] | None`: Список извлеченных идентификаторов товаров, один идентификатор или `None`, если не найдено ни одного валидного идентификатора.

**Как работает функция**:
1.  Функция `extract_prod_ids` принимает на вход либо строку (URL-адрес или идентификатор товара), либо список строк (список URL-адресов или идентификаторов товаров).
2.  Внутри функции определяется вложенная функция `extract_id`, которая используется для извлечения или проверки идентификатора товара из отдельного URL-адреса или идентификатора.
3.  Если входные данные представлены в виде списка, функция применяет `extract_id` к каждому элементу списка, отфильтровывая `None` значения (невалидные идентификаторы). Результат возвращается в виде списка извлеченных идентификаторов. Если список пуст после фильтрации, возвращается `None`.
4.  Если входные данные представлены в виде строки, функция вызывает `extract_id` для этой строки и возвращает результат.

**Внутренние функции**:

#### `extract_id`

```python
    def extract_id(url: str) -> str | None:
        """ Функция извлекает идентификатор товара из заданного URL-адреса или проверяет идентификатор товара.

        Args:
            url (str): URL-адрес или идентификатор товара.

        Returns:
            str | None: Извлеченный идентификатор товара или сам ввод, если это валидный идентификатор, или `None`, если не найдено ни одного валидного идентификатора.

        Raises:
            - Отсутствуют явные исключения, но функция может вернуть `None` в случае отсутствия валидного идентификатора.

        Example:
            >>> extract_id("https://www.aliexpress.com/item/123456.html")
            '123456'

            >>> extract_id("7891011")
            '7891011'

            >>> extract_id("https://www.example.com/item/abcdef.html")
            None
        """
```

**Назначение**: Извлечение идентификатора товара из URL-адреса или проверка предоставленного идентификатора.

**Параметры**:
- `url` (str): URL-адрес или идентификатор товара.

**Возвращает**:
- `str | None`: Извлеченный идентификатор товара, или сам URL, если он является валидным идентификатором, или `None`, если не найдено ни одного валидного идентификатора.

**Как работает функция**:
1.  Функция `extract_id` принимает на вход строку, которая может быть URL-адресом или идентификатором товара.
2.  Сначала функция проверяет, является ли входная строка числом (то есть, является ли она уже идентификатором товара). Если это так, функция возвращает эту строку.
3.  Если входная строка не является числом, функция пытается извлечь идентификатор товара из URL-адреса с помощью регулярного выражения.
4.  Если регулярное выражение находит совпадение, функция возвращает извлеченный идентификатор.
5.  Если регулярное выражение не находит совпадение, функция возвращает `None`.

**Примеры**:

```python
extract_prod_ids("https://www.aliexpress.com/item/123456.html")
# Результат: '123456'

extract_prod_ids(["https://www.aliexpress.com/item/123456.html", "7891011.html"])
# Результат: ['123456', '7891011']

extract_prod_ids(["https://www.example.com/item/123456.html", "https://www.example.com/item/abcdef.html"])
# Результат: ['123456']

extract_prod_ids("7891011")
# Результат: '7891011'

extract_prod_ids("https://www.example.com/item/abcdef.html")
# Результат: None