# Модуль scenario.py для сбора товаров с Gearbest

## Обзор

Модуль предназначен для сбора списка товаров со страниц категорий поставщика Gearbest с использованием веб-драйвера. У каждого поставщика свой сценарий обработки категорий.

## Подробнее

Этот модуль выполняет следующие задачи:

- Собирает список категорий со страниц продавца.
- Собирает список товаров со страницы категории.
- Итерируясь по списку, передает управление в `grab_product_page()`, отправляя функции текущий URL страницы.
  `grab_product_page()` обрабатывает поля товара и передает управление классу `Product`.

## Функции

### `get_list_products_in_category`

```python
def get_list_products_in_category (s) -> list[str, str, None]:
    """Возвращает список URL товаров со страницы категории.

    Если нужно пролистать страницы категорий - выполняет пролистывание.

    Args:
        s: Объект поставщика (Supplier).

    Returns:
        list[str, str, None]: Список URL товаров или None в случае отсутствия товаров.
    """
```

**Назначение**: Функция извлекает список URL товаров со страницы категории, предоставляемой объектом поставщика.

**Параметры**:
- `s`: Объект поставщика, содержащий информацию о драйвере и локаторах элементов на странице.

**Возвращает**:
- `list[str, str, None]`: Список URL товаров, представленных в виде строк. Возвращает `None`, если список товаров не найден.

**Как работает функция**:
1. Функция извлекает драйвер из объекта поставщика `s`.
2. Извлекает локаторы для категории из объекта поставщика `s`.
3. Выполняет закрытие баннера, используя локатор `close_banner` из локаторов товара поставщика.
4. Проверяет, что локаторы существуют. Если локаторы не найдены, функция логирует ошибку и возвращает `None`.
5. Выполняет прокрутку страницы.
6. Извлекает список URL товаров, используя локатор `product_links` из локаторов категории.
7. Проверяет, что список URL товаров не пуст. Если список пуст, функция логирует предупреждение и возвращает `None`.
8. Преобразует результат в список, если он представлен строкой.
9. Логирует количество найденных товаров.
10. Возвращает список URL товаров.

```python
    d = s.driver
    l: dict = s.locators['category']
    d.execute_locator (s.locators ['product']['close_banner'] )
    if not l:
        logger.error(f"А где локаторы? {l}")
        return
    d.scroll()
    list_products_in_category = d.execute_locator(l['product_links'])
    if not list_products_in_category:
        logger.warning('Нет ссылок на товары. Так бывает')
        return
    list_products_in_category = [list_products_in_category] if isinstance(list_products_in_category, str) else list_products_in_category
    logger.info(f""" Найдено {len(list_products_in_category)} товаров """)
    return list_products_in_category
```

**Примеры**:

```python
# Пример вызова функции
supplier = Supplier(...) # Предполагается, что у вас есть объект Supplier
product_list = get_list_products_in_category(supplier)
if product_list:
    print(f"Найдено {len(product_list)} товаров")
else:
    print("Товары не найдены")
```

### `get_list_categories_from_site`

```python
def get_list_categories_from_site(s):
    ...
```

**Назначение**:
Эта функция предназначена для получения списка категорий с сайта поставщика. Подробная реализация не предоставлена (`...`).