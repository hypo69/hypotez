# README.MD

## Обзор

Этот файл содержит сценарии для обработки товаров в API, использующего модели Gemini и OpenAI. 

## Подробности

Сценарии позволяют обрабатывать запросы, связанные с товарами, с использованием AI-моделей.  Каждый сценарий включает в себя шаги, необходимые для получения валидных данных от модели,  обработки ошибок и возврата результата. 

## Сценарий

```mermaid
flowchart TD
    A[Запрос на обработку товаров products_list] --> B[Обработка запроса с командой модели]
    B --> C[Ответ от модели]
    
    %% Проверка на отсутствие ответа
    C -->|Нет ответа| D[Логирование ошибки no response from gemini]
    D --> E[Повторный запрос /attempts - 1/]

    %% Проверка на валидность данных
    C -->|Невалидные данные| F[Логирование ошибки /Error in data from gemini/]
    F --> E

    %% Проверка на полученные данные
    C -->|Получены данные| G{Данные в виде списка?}
    G -->|Да| H{Содержит два элемента /ru, he/?}
    H -->|Да| I[Извлечение ru и he]
    H -->|Нет| J[Извлечение ru и he из первого элемента]
    H -->|Невалидная структура| K[Логирование ошибки /Проблема парсинга ответа/]
    K --> E

    G -->|Нет| L{Данные в виде объекта?}
    L -->|Да| M[Извлечение ru и he из объекта]
    L -->|Нет| N[Логирование ошибки /Invalid ru or he data/]
    N --> E

    %% Возврат результата
    M --> O[Возврат результата ru и he]
    I --> O
    J --> O



```

## Параметры

- **products_list**: список товаров

## Возвращает

-  **ru**: Русский текст
- **he**: Ивритский текст

## Вызывает исключения

- **Exception**: В случае возникновения ошибки во время обработки.


## Примеры

```python
products_list = [
    {
        'product_id': 1,
        'name': 'Товар 1',
        'description': 'Описание товара 1',
        'price': 100,
    },
    {
        'product_id': 2,
        'name': 'Товар 2',
        'description': 'Описание товара 2',
        'price': 200,
    },
]

ru, he = process_products(products_list)

print(f'Русский текст: {ru}')
print(f'Ивритский текст: {he}')

```
```python
# Пример с ошибкой
products_list = [
    {
        'product_id': 1,
        'name': 'Товар 1',
        'description': 'Описание товара 1',
        'price': 100,
    },
    {
        'product_id': 2,
        'name': 'Товар 2',
        'description': 'Описание товара 2',
        'price': 200,
    },
    {
        'product_id': 3,
        'name': 'Товар 3',
        'description': 'Описание товара 3',
        'price': 300,
    }
]

try:
    ru, he = process_products(products_list)
except Exception as ex:
    print(f'Произошла ошибка: {ex}')