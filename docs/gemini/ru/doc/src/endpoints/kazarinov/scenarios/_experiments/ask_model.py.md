# Модуль для проверки валидности ответов от модели

## Обзор

Модуль `ask_model.py`  предназначен для взаимодействия с AI-моделью Google Gemini для проверки валидности ответов. 
Он запрашивает модель  используя инструкции, определяющие задачу, и список продуктов. 
Модуль обрабатывает полученный ответ, преобразует его в формат JSON и сохраняет на диск. 

## Подробней

Файл `ask_model.py`  работает с AI-моделью Google Gemini, взаимодействуя с ней для проверки валидности ответов. 
Модель получает  инструкции и список продуктов для выполнения задания. 
Модуль проверяет полученный от модели ответ: 
- Проверяет наличие ответа. Если ответ отсутствует, модуль логгирует ошибку и завершает работу.
-  Парсит JSON из полученного ответа. Если парсинг завершается неудачно, модуль логгирует ошибку и завершает работу.
-  Сохраняет ответ в JSON-файл.

## Классы

### `GoogleGenerativeAi`

**Описание**: Класс `GoogleGenerativeAi`  представляет собой интерфейс для взаимодействия с AI-моделью Google Gemini.
**Наследует**:  Класс  `GoogleGenerativeAi`  не наследует никакие классы.
**Атрибуты**:
    - `api_key` (str): API-ключ для доступа к Google Gemini.
    - `system_instruction` (str):  Системная инструкция для AI-модели.
    - `generation_config` (dict): Конфигурация генерации, которая определяет тип данных в ответе.
**Методы**:
    - `ask(prompt: str) -> str`:  Отправляет запрос к  AI-модели Google Gemini и возвращает ответ.

## Функции

### `model_ask`

**Назначение**: 
    Функция `model_ask`  отправляет запрос к  AI-модели Google Gemini с заданными инструкциями и списком продуктов. 
    Она проверяет полученный ответ, обрабатывает его и сохраняет в формате JSON-файла. 
**Параметры**:
    - `lang` (str): Язык запроса. 
    - `attempts` (int): Количество попыток отправить запрос к модели. По умолчанию - 3.
**Возвращает**:
    - `dict`:  Словарь, содержащий ответ от модели. 
**Вызывает исключения**:
    -  `SomeError`:  Если возникает ошибка, модуль логгирует ее и завершает работу.
**Как работает функция**:
    - Функция `model_ask`  запускает запрос к AI-модели Google Gemini с использованием `model.ask`. 
    -  Проверяет, получен ли ответ от модели. Если нет, логгирует ошибку и завершает работу.
    -  Парсит полученный JSON-ответ с использованием `j_loads`. Если парсинг завершается неудачно, логгирует ошибку и завершает работу.
    -  Возвращает обработанный словарь ответа или завершает работу в случае возникновения ошибок.

**Примеры**:
    - `model_ask('ru')`  - Отправляет запрос к модели на русском языке.
    - `model_ask('he', attempts = 2)` - Отправляет запрос к модели на иврите с двумя попытками.