# Модуль для получения грабера на основе URL поставщика

## Обзор

Этот модуль содержит функции для получения соответствующего объекта грабера для заданного URL поставщика. 
У каждого поставщика есть свой грабер, который извлекает значения полей с целевой HTML-страницы.

## Подробности

Модуль предоставляет две ключевые функции:

- `get_graber_by_supplier_url`: Возвращает грабер на основе полного URL поставщика.
- `get_graber_by_supplier_prefix`: Возвращает грабер на основе префикса имени поставщика (например, `ksp`, `aliexpress`).

## Как работает

Модуль работает по принципу сопоставления URL или префикса поставщика с соответствующим классом грабера. 
Функции анализируют URL или префикс и выбирают класс грабера на основе определенных правил.

## Классы

### `Graber`

**Описание**: Базовый класс для всех граберов. 

**Наследует**: 
   -  `object`

**Атрибуты**:

- `driver (Driver)`: Экземпляр веб-драйвера для взаимодействия со страницей.
- `lang_index (int)`: Индекс языка, используемый для локализации.

**Методы**:

- `get_product_data()`: Извлекает данные о товаре с целевой страницы.

### `AliexpressGraber`

**Описание**: Грабер для AliExpress.

**Наследует**: 
   -  `Graber`

### `AmazonGraber`

**Описание**: Грабер для Amazon.

**Наследует**: 
   -  `Graber`

### `BangoodGraber`

**Описание**: Грабер для Banggood.

**Наследует**: 
   -  `Graber`

### `CdataGraber`

**Описание**: Грабер для Cdata.

**Наследует**: 
   -  `Graber`

### `EbayGraber`

**Описание**: Грабер для Ebay.

**Наследует**: 
   -  `Graber`

### `EtzmalehGraber`

**Описание**: Грабер для Etzmaleh.

**Наследует**: 
   -  `Graber`

### `GearbestGraber`

**Описание**: Грабер для Gearbest.

**Наследует**: 
   -  `Graber`

### `GrandadvanceGraber`

**Описание**: Грабер для Grandadvance.

**Наследует**: 
   -  `Graber`

### `HBGraber`

**Описание**: Грабер для HB.

**Наследует**: 
   -  `Graber`

### `IvoryGraber`

**Описание**: Грабер для Ivory.

**Наследует**: 
   -  `Graber`

### `KspGraber`

**Описание**: Грабер для Ksp.

**Наследует**: 
   -  `Graber`

### `KualaStyleGraber`

**Описание**: Грабер для KualaStyle.

**Наследует**: 
   -  `Graber`

### `MorleviGraber`

**Описание**: Грабер для Morlevi.

**Наследует**: 
   -  `Graber`

### `VisualDGGraber`

**Описание**: Грабер для VisualDG.

**Наследует**: 
   -  `Graber`

### `WallaShopGraber`

**Описание**: Грабер для WallaShop.

**Наследует**: 
   -  `Graber`

### `WallmartGraber`

**Описание**: Грабер для Wallmart.

**Наследует**: 
   -  `Graber`

## Функции

### `get_graber_by_supplier_url`

**Назначение**: Возвращает соответствующий грабер для заданного URL поставщика.

**Параметры**:

- `driver (Driver)`: Экземпляр веб-драйвера для взаимодействия со страницей.
- `url (str)`: URL страницы поставщика.
- `lang_index (int)`: Индекс языка в магазине Prestashop (например, для локализации).

**Возвращает**:

- `Graber | None`: Экземпляр соответствующего класса Graber, если совпадение найдено, иначе None.

**Вызывает исключения**:
- `None`

**Как работает**:

- Функция сначала переходит по URL с помощью драйвера.
- Затем она проверяет начало URL на соответствие списку префиксов поставщиков.
- Если совпадение найдено, функция создает экземпляр соответствующего класса грабера и возвращает его.
- Если совпадение не найдено, функция возвращает `None`.

**Примеры**:
```python
from src.webdriver import Driver # Пример импорта
driver_instance = Driver() # Пример создания экземпляра
supplier_url = 'https://ksp.co.il/item/12345'
lang_id = 2
grabber_instance = get_graber_by_supplier_url(driver_instance, supplier_url, lang_id)
if grabber_instance:
    print(f'Grabber found: {type(grabber_instance).__name__}')
# Вывод: Grabber found: KspGraber 
```

### `get_graber_by_supplier_prefix`

**Назначение**: Возвращает соответствующий грабер по префиксу имени поставщика.

**Параметры**:

- `driver (Driver)`: Экземпляр веб-драйвера.
- `supplier_prefix (str)`: Строковый префикс или идентификатор поставщика (в нижнем регистре).
- `lang_index (int, optional)`: Индекс языка. По умолчанию 2.

**Возвращает**:

- `Graber | None`: Экземпляр соответствующего класса Graber, если префикс совпадает, иначе None.

**Вызывает исключения**:
- `None`

**Как работает**:

- Функция приводит префикс к нижнему регистру для надежного сравнения.
- Затем она проверяет префикс на соответствие списку префиксов поставщиков.
- Если совпадение найдено, функция создает экземпляр соответствующего класса грабера и возвращает его.
- Если совпадение не найдено, функция возвращает `None`.

**Примеры**:
```python
from src.webdriver import Driver # Пример импорта
driver_instance = Driver() # Пример создания экземпляра
prefix = 'ksp'
lang_id = 2
grabber_instance = get_graber_by_supplier_prefix(driver_instance, prefix, lang_id)
if grabber_instance:
    print(f'Grabber found: {type(grabber_instance).__name__}')
# Вывод: Grabber found: KspGraber
```

## Параметры

- `driver (Driver)`: Экземпляр веб-драйвера, используемый для взаимодействия со страницей. 
- `url (str)`: Полный URL-адрес страницы поставщика, с которого нужно получить информацию.
- `lang_index (int)`: Индекс языка, используемый для локализации информации о товаре.

## Примеры

- `get_graber_by_supplier_url(driver, 'https://www.aliexpress.com/item/1234567890.html', 2)`: Возвращает `AliexpressGraber` для извлечения данных с AliExpress.
- `get_graber_by_supplier_prefix(driver, 'ksp', 2)`: Возвращает `KspGraber` для извлечения данных с Ksp.

## Дополнительные сведения

- **Необходимые модули**:
    - `src.webdriver`: Модуль, предоставляющий функциональность веб-драйвера (Selenium).
    - `src.suppliers.graber`: Базовый класс `Graber` для всех граберов.
    - `src.suppliers.suppliers_list`: Подмодули, содержащие классы граберов для конкретных поставщиков.
- **Логгирование**: 
    - Модуль использует `logger` из `src.logger.logger` для записи отладочной информации.