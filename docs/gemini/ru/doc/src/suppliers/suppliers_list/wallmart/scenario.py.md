# Модуль сбора товаров со страницы категорий поставщика kualastyle.il через вебдрайвер

## Обзор

Модуль содержит сценарий обработки категорий для поставщика `kualastyle.il`.

## Подробности

Сценарий использует вебдрайвер для сбора товаров со страниц категорий. 
Сбор категорий и товаров выполняется в несколько этапов:

1. **Сбор списка категорий со страниц продавца** (метод `get_list_categories_from_site()`):
    - Извлекает список актуальных категорий с сайта `kualastyle.il`.
    - Возвращает список категорий.
    - Необходимо добавить механизм проверки изменений в категориях (например, таблицу `PrestaShop.categories <-> aliexpress.shop.categoies`).
2. **Сбор списка товаров со страницы категории** (метод `get_list_products_in_category()`):
    - Для каждой категории выполняется поиск и сбор ссылок на товары на странице.
    -  При необходимости, выполняется пролистывание страниц категорий.
    - Возвращает список ссылок на товары.
3. **Обработка страницы товара** (метод `grab_product_page()`):
    - Извлекает информацию о товаре с соответствующей страницы.
    - Создает объект `Product` с полученными данными.
    - Передает управление классу `Product` для дальнейшей обработки.

## Классы

### `Supplier`

**Описание**: Класс Supplier используется для представления поставщика и его данных.

**Наследует**: 
    - Не наследует другие классы.

**Атрибуты**:
    - `driver`: Объект вебдрайвера.
    - `locators`: Словарь локаторов веб-элементов.
    - `current_scenario`: Словарь, содержащий данные о текущем сценарии.

**Методы**:
    - `get_list_products_in_category()`: Сбор списка товаров со страницы категории.
    - `grab_product_page()`: Обработка страницы товара.
    - `get_list_categories_from_site()`: Сбор списка категорий.

## Функции

### `get_list_products_in_category`

**Назначение**: 
    - Сбор списка товаров со страницы категории. 
    - Пролистывает страницы категорий, если необходимо.

**Параметры**:
    - `s (Supplier)`: Объект поставщика, содержащий информацию о вебдрайвере, локаторах и текущем сценарии.

**Возвращает**:
    - `List[str, str, None]`: Список ссылок на товары или `None`, если товары не найдены.

**Вызывает исключения**:
    - `None`: Не вызывает исключений.

**Как работает функция**:
    - Получает доступ к вебдрайверу из объекта `s.driver`.
    - Получает локаторы из объекта `s.locators`.
    - Ищет ссылки на товары на странице категории с помощью локатора `l['product_links']`.
    -  Если ссылок нет - выводит предупреждение.
    - Если ссылок больше одной, проверяет наличие кнопки "Далее" и пролистывает страницы.
    -  Возвращает список ссылок на товары.

### `paginator`

**Назначение**: Пролистывает страницы категорий, если необходимо.

**Параметры**:
    - `d (Driver)`: Объект вебдрайвера.
    - `locator (dict)`: Словарь локаторов веб-элементов.
    - `list_products_in_category (list)`: Список ссылок на товары.

**Возвращает**:
    - `bool`: `True`, если есть кнопка "Далее" для пролистывания. `False`, если нет.

**Вызывает исключения**:
    - `None`: Не вызывает исключений.

**Как работает функция**:
    - Проверяет наличие кнопки "Далее" с помощью локатора `locator['pagination']['<-\']`.
    -  Если кнопка "Далее" есть - возвращает `True`. 
    -  Если нет - возвращает `False`.

### `get_list_categories_from_site`

**Назначение**: Сбор списка категорий со страниц продавца.

**Параметры**:
    - `s`: Объект поставщика.

**Возвращает**:
    - `None`: Не возвращает значения.

**Вызывает исключения**:
    - `None`: Не вызывает исключений.

**Как работает функция**:
    - Получает доступ к вебдрайверу из объекта `s.driver`.
    -  Ищет элементы с помощью локатора `l['category']`.
    - Возвращает список категорий.

## Примеры

**Пример работы с `get_list_products_in_category`**:

```python
from src.suppliers import Supplier

# Предположим, что у нас уже есть объект Supplier
supplier = Supplier('kualastyle.il')

# Получаем список товаров со страницы категории
products_urls = supplier.get_list_products_in_category()

# Вывод результатов
if products_urls:
    print(f"Найдено {len(products_urls)} товаров: {products_urls}")
else:
    print("Товары не найдены.")
```
```python
from src.suppliers import Supplier

# Предположим, что у нас уже есть объект Supplier
supplier = Supplier('kualastyle.il')

# Получаем список товаров со страницы категории
products_urls = supplier.get_list_products_in_category()

# Вывод результатов
if products_urls:
    print(f"Найдено {len(products_urls)} товаров: {products_urls}")
else:
    print("Товары не найдены.")
```

## Параметры

- `s`: Объект `Supplier`, содержащий информацию о поставщике.
- `d`: Объект `Driver`, представляющий вебдрайвер.
- `l`: Словарь локаторов веб-элементов.
- `list_products_in_category`: Список ссылок на товары.

## Твое поведение при анализе кода:

- Внутри кода ты можешь встретить выражение между `<` `>`. Например: `<инструкция для модели gemini:Загрузка описаний товаров в PrestaShop.>, <далее, если есть>. Это заготовки, куда ты вставляешь релевантное значение.
- Всегда смотри системную инструкцию для обработки кода проекта `hypotez`.
- Анализируй расположение файла в проекте. Это поможет понять его назначение и взаимосвязь с другими файлами. Расположение файла ты найдешь в самой превой строке кода, начинающейся с `## \\file /...`.
- Запоминай предоставленный код и анализируй его связь с другими частями проекта.
- В этой инструкции не надо предлагать улучшение кода. Четко следуй пункту 5. **Пример файла** при составлении ответа.