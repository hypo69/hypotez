# Модуль `src.gui.openai_trаigner.payload`

## Обзор

Этот модуль содержит код для работы с OpenAI. В нём определены функции и классы, которые используются для создания запросов к API OpenAI, обработки ответов и выполнения других действий.

## Подробнее

Этот модуль использует API OpenAI для взаимодействия с моделями искусственного интеллекта, такими как GPT-3. Он предоставляет возможность отправки запросов к API OpenAI и получения ответов.

## Классы

### `Payload`

**Описание**: Класс `Payload` представляет собой объект, который используется для хранения данных, передаваемых в API OpenAI.

**Атрибуты**:

- `role` (str): Роль пользователя. Определяет контекст взаимодействия с API.
- `lang` (str): Язык взаимодействия с API.
- `model` (List[str]): Список моделей OpenAI, которые будут использоваться для обработки запроса.
- `input_data` (str): Исходные данные для обработки.
- `instructions` (str): Дополнительные инструкции для модели.
- `function_call` (dict): Параметры для вызова функции.
- `tool_code` (str): Код, который будет выполняться в качестве инструмента.
- `file_location_in_project_hypotez` (str): Путь к файлу в проекте. 
- `instruction` (str): Инструкции для обработки файла. 

**Пример**:

```python
from src.gui.openai_trаigner.payload import Payload

payload = Payload(
    role="doc_writer_md",
    lang="ru",
    file_location_in_project_hypotez="hypotez/src/gui/openai_trаigner/payload.py",
    instruction="```markdown\n# ИНСТРУКЦИЯ\n\nПредоставленный ниже код - часть проекта `hypotez`. Задача: создать документацию для разработчика в формате `Markdown` для каждого входного Python-файла. \nДокументация должна соответствовать следующим требованиям:\n\n1. **Формат документации**:\n   - Используй стандарт `Markdown (.md)`.\n   - Каждый файл должен начинаться с заголовка и краткого описания его содержимого.\n\n   Примеры документации: Пример загаоловка файла модуля:\n\n        """\n        Модуль для работы с ассистентом программиста\n        =================================================\n\n        Модуль содержит класс :class:`CodeAssistant`, который используется для взаимодействия с различными AI-моделями\n        (например, Google Gemini и OpenAI) и выполнения задач обработки кода.\n\n        Пример использования\n        ----------------------\n\n        >>>assistant = CodeAssistant(role=\'code_checker\', lang=\'ru\', model=[\'gemini\'])\n        >>>assistant.process_files()\n        """\n\n   - Для всех классов и функций используйте следующий формат комментариев:\n     ```python\n     class MyClass:\n         """Описание назначения класса\n         Inherits: \n            Если класс наследует другой - дай описание наследования\n\n         Attributes:\n            param1 (str): Описание параметров (атрибуты) класса\n\n         Methods:\n            function_1(): Описание назаначения функций/методов класса\n        """\n     \n         def function(param: str, param1: Optional[str | dict | str] = None) -> dict | None:\n             """ Функция выполняет некоторое действия... <Тут Ты пишешь что именно делает функция> \n             Args:\n                 param (str): Описание параметра `param`.\n                 param1 (Optional[str | dict | str], optional): Описание параметра `param1`. По умолчанию `None`.\n\n             Returns:\n                 dict | None: Описание возвращаемого значения. Возвращает словарь или `None`.\n\n             Raises:\n                 SomeError: Описание ситуации, в которой возникает исключение `SomeError`.\n                ...\n                <Выводить тело функции НЕ НАДО. Только docstring>\n             """\n             def inner_function():\n                """ Внутрняя функция Функция выполняет некоторое действия... <Тут Ты пишешь что именно делает функция> \n                    Args:\n                        param (str): Описание параметра `param`.\n                        param1 (Optional[str | dict | str], optional): Описание параметра `param1`. По умолчанию `None`.\n\n                    Returns:\n                        dict | None: Описание возвращаемого значения. Возвращает словарь или `None`.\n\n                    Raises:\n                        SomeError: Описание ситуации, в которой возникает исключение `SomeError`.\n\n                    ...\n                  \n                      НЕ ВЫВОДИ КОД ФУНКЦИИ. ТОЛЬКО DOCSTR\n\n                    """\n         ```\n     - Все комментарии в фунцкии и docstring должны быть на русском языке в формате UTF-8\n     - Если внутри рассматривемой функции есть внутренние функции - рассматривай подробно каждую из них по отдельности\n     \n   - Используй `ex` вместо `e` в блоках обработки исключений.\n   - Для логгирования используй `logger` из моего модуля `src.logger`. Например:\n     ```python\n     from src.logger import logger\n     logger.info(\'Some information message\')\n     ...\n     except SomeError as ex:\n         logger.error(\'Some error message\', ex, exc_info = True), где ошибка передается вторым аргументом. exc_info определает надо ли выводить служебную информацию.\n    ```\n\n\n    _ Если в коде используется вебдрайвер, знай как его использовать\n    наследуй Driver, Chrome, Firexox, Playwright\n    Далее определи так\n    # Создание инстанса драйвера (пример с Chrome)\n    driver = Drivewr(Chrome)\n    В модулях Driver И Chrome, Firexox, Playwright уже содержатся все настройки selenium. \n    Основная комада, которая используется в коде: `driver.execute_locator(l:dict)`\n    Она возвращает аначение вебэелемента по локатору.\n\n\n   - Все комментарии и docstring должны быть на русском языке в формате UTF-8. Если в оригинальном коде текст написан на английском - сделай перевеод на русский\n\n2. **Содержание (TOC)**:\n   - В начале каждого файла документации добавь раздел с оглавлением и ссылками на функции и методы внутри кода\n   - Структура оглавления должна включать ссылки на все основные разделы документации модуля.\n\n3. **Форматирование документации**:\n   - Используй синтаксис Markdown для всех заголовков, списков и ссылок.\n   - Для документирования классов, функций и методов включай структурированные разделы с описаниями, деталями параметров, возвращаемых значений и вызываемых исключений. Пример:\n\n    ## Классы\n\n    ### `class_name\n    Описание назначения класса\n        **Наследует** \n            Если класс наследует другой - дай описание наследования\n\n         **Аттрибуты**:\n            param1 (str): Описание параметров (атрибутов) класса\n\n         **Методы**:\n            function_1(): Описание назаначения функций/методов класса\n\n\n     ## Функции\n\n     ### `function_name`\n\n     **Назначение**: Назначение функции.\n\n\n     **Параметры**:\n     - `param` (str): Описание параметра `param`.\n     - `param1` (Optional[str | dict | str], optional): Описание параметра `param1`. По умолчанию `None`.\n\n     **Возвращает**:\n     - `dict | None`: Описание возвращаемого значения.\n\n     **Вызывает исключения**:\n     - `SomeError`: Описание ситуации, в которой возникает исключение `SomeError`.\n\n     Если внутри функции есть внутренние фуйнкции - рассмотри их по отдельности каждую\n     **Внутренние функции**: Если есть\n\n     \n\n     **Как работает функция**:\n     - Подробно объясни назначиение функции. Сдеалай подробное описание того, какие действия преобразования происходит в теле функции\n\n\n     **Примеры**:\n     - Создай несколько примеров вызова функции с разными параметрами, которые передающтся в функцию\n     \n     \n4. **Заголовки разделов**:\n   - Используйте заголовки первого уровня (`#`), второго уровня (`##`), третьего уровня (`###`) и четвёртого уровня (`####`) последовательно на протяжении всего файла.\n\n5. **Пример файла**:\n\n   # Название модуля\n\n   ## Обзор\n\n   Краткое описание назначения модуля.\n\n   ## Подорбней\n\n   Более подробное описание. Объясни как и зачем используется данный код в проекте. \n   Анализируй предоставленный тебе ранее код\n\n   ## Классы\n\n   ### `ClassName`\n\n   **Описание**: Описание класса.\n   **Наследует**:\n   **Атрибуты**:\n   **Параметры**:\n\n    **Принцип работы**:\n        Объясни  работу класса. Если класс сложный сдеалай подорбный разбор кода\n\n   Сделай документацию для КАЖДОЙ функции или метода. Объясни назначение каждой переменной.\n   - Все комментарии и docstring должны быть на русском языке в формате UTF-8. Если в оригинальном коде текст написан на английском - переводи его на русский\n\n   **Методы**: # если есть методы\n   - `method_name`: Краткое описание метода.   \n   - `method_name`: Краткое описание метода.\n   **Параметры**: # если есть параметры\n   - `param` (str): Описание параметра `param`. \n   - `param1` (Optional[str | dict | str], optional): Описание параметра `param1`. По умолчанию `None`.\n   **Примеры**\n   - Примеры определения класса и работы с классом\n\n\n   ## Методы класса\n\n   ### `function_name`\n\n   ```python\n   def my_func(param1:str, param2:Optional[int] = 0) -> bool:\n       """ Функция выполняет некоторое действия... <Тут Ты пишешь что именно делает функция> \n       Args:\n           param1 (str): Описание параметра `param1`.\n           param2 (Optional[int], optional): Описание параметра `param2`. По умолчанию 0.\n       Returns:\n           bool: Описание возвращаемого значения. Возвращает `True` или `False`.\n\n        Raises:\n             Ошибка выполнение\n\n        Example:\n            Примеры вызовов со всем спектром параметров. которы можно передать в функцию\n\n       """\n       - Не отдавай код функции. Только документацию и примеры вызова функции;\n       - Все комментарии и docstring должны быть на русском языке в формате UTF-8\n   ```\n\n\n\n   ## Параметры класса\n   - `param` (str): Более подробное Описание параметра `param`.\n   - `param1` (Optional[str | dict | str], optional): Более подробное Описание параметра `param1`. По умолчанию `None`.\n\n \n\n   **Примеры**: # Все возможные варианты примеров вызова функции с разными параметрами\n\n   -------------------------------------------------------------------------------------\n   \n\n\n## Твое поведение при анализе кода:\n- внутри кода ты можешь встретить выражение между `<` `>`. Например: <инструкция для модели gemini:Загрузка описаний товаров в PrestaShop.>, <далее, если есть>. Это заготовки, куда ты вставляешь релевантное значение\n- всегда смотри системную инструкцию для обработки кода проекта `hypotez`;\n- анализируй расположение файла в проекте. Это поможет понять его назначение и взаимосвязь с другими файлами. Расположение файла ты найдешь в самой превой строке кода, начинающейся с `## \\file /...`;\n- запоминай предоставленный код и анализируй его связь с другими частями проекта;\n- В этой инструкции не надо предлагать улучшение кода. Четко следуй пункту 5. **Пример файла** при составлении ответа \n\n# КОНЕЦ ИНСТРУКЦИИ\n```",
)

```

## Методы

### `to_dict()`

**Назначение**: Преобразует объект `Payload` в словарь. 

**Возвращает**:
- `dict`: Словарь, содержащий все атрибуты объекта `Payload`.


## Параметры класса

- `role` (str): Роль пользователя. Определяет контекст взаимодействия с API.
- `lang` (str): Язык взаимодействия с API.
- `model` (List[str]): Список моделей OpenAI, которые будут использоваться для обработки запроса.
- `input_data` (str): Исходные данные для обработки.
- `instructions` (str): Дополнительные инструкции для модели.
- `function_call` (dict): Параметры для вызова функции.
- `tool_code` (str): Код, который будет выполняться в качестве инструмента.
- `file_location_in_project_hypotez` (str): Путь к файлу в проекте. 
- `instruction` (str): Инструкции для обработки файла. 


**Примеры**:

```python
from src.gui.openai_trаigner.payload import Payload

payload = Payload(
    role="doc_writer_md",
    lang="ru",
    file_location_in_project_hypotez="hypotez/src/gui/openai_trаigner/payload.py",
    instruction="```markdown\n# ИНСТРУКЦИЯ\n\nПредоставленный ниже код - часть проекта `hypotez`. Задача: создать документацию для разработчика в формате `Markdown` для каждого входного Python-файла. \nДокументация должна соответствовать следующим требованиям:\n\n1. **Формат документации**:\n   - Используй стандарт `Markdown (.md)`.\n   - Каждый файл должен начинаться с заголовка и краткого описания его содержимого.\n\n   Примеры документации: Пример загаоловка файла модуля:\n\n        """\n        Модуль для работы с ассистентом программиста\n        =================================================\n\n        Модуль содержит класс :class:`CodeAssistant`, который используется для взаимодействия с различными AI-моделями\n        (например, Google Gemini и OpenAI) и выполнения задач обработки кода.\n\n        Пример использования\n        ----------------------\n\n        >>>assistant = CodeAssistant(role=\'code_checker\', lang=\'ru\', model=[\'gemini\'])\n        >>>assistant.process_files()\n        """\n\n   - Для всех классов и функций используйте следующий формат комментариев:\n     ```python\n     class MyClass:\n         """Описание назначения класса\n         Inherits: \n            Если класс наследует другой - дай описание наследования\n\n         Attributes:\n            param1 (str): Описание параметров (атрибуты) класса\n\n         Methods:\n            function_1(): Описание назаначения функций/методов класса\n        """\n     \n         def function(param: str, param1: Optional[str | dict | str] = None) -> dict | None:\n             """ Функция выполняет некоторое действия... <Тут Ты пишешь что именно делает функция> \n             Args:\n                 param (str): Описание параметра `param`.\n                 param1 (Optional[str | dict | str], optional): Описание параметра `param1`. По умолчанию `None`.\n\n             Returns:\n                 dict | None: Описание возвращаемого значения. Возвращает словарь или `None`.\n\n             Raises:\n                 SomeError: Описание ситуации, в которой возникает исключение `SomeError`.\n                ...\n                <Выводить тело функции НЕ НАДО. Только docstring>\n             """\n             def inner_function():\n                """ Внутрняя функция Функция выполняет некоторое действия... <Тут Ты пишешь что именно делает функция> \n                    Args:\n                        param (str): Описание параметра `param`.\n                        param1 (Optional[str | dict | str], optional): Описание параметра `param1`. По умолчанию `None`.\n\n                    Returns:\n                        dict | None: Описание возвращаемого значения. Возвращает словарь или `None`.\n\n                    Raises:\n                        SomeError: Описание ситуации, в которой возникает исключение `SomeError`.\n\n                    ...\n                  \n                      НЕ ВЫВОДИ КОД ФУНКЦИИ. ТОЛЬКО DOCSTR\n\n                    """\n         ```\n     - Все комментарии в фунцкии и docstring должны быть на русском языке в формате UTF-8\n     - Если внутри рассматривемой функции есть внутренние функции - рассматривай подробно каждую из них по отдельности\n     \n   - Используй `ex` вместо `e` в блоках обработки исключений.\n   - Для логгирования используй `logger` из моего модуля `src.logger`. Например:\n     ```python\n     from src.logger import logger\n     logger.info(\'Some information message\')\n     ...\n     except SomeError as ex:\n         logger.error(\'Some error message\', ex, exc_info = True), где ошибка передается вторым аргументом. exc_info определает надо ли выводить служебную информацию.\n    ```\n\n\n    _ Если в коде используется вебдрайвер, знай как его использовать\n    наследуй Driver, Chrome, Firexox, Playwright\n    Далее определи так\n    # Создание инстанса драйвера (пример с Chrome)\n    driver = Drivewr(Chrome)\n    В модулях Driver И Chrome, Firexox, Playwright уже содержатся все настройки selenium. \n    Основная комада, которая используется в коде: `driver.execute_locator(l:dict)`\n    Она возвращает аначение вебэелемента по локатору.\n\n\n   - Все комментарии и docstring должны быть на русском языке в формате UTF-8. Если в оригинальном коде текст написан на английском - сделай перевеод на русский\n\n2. **Содержание (TOC)**:\n   - В начале каждого файла документации добавь раздел с оглавлением и ссылками на функции и методы внутри кода\n   - Структура оглавления должна включать ссылки на все основные разделы документации модуля.\n\n3. **Форматирование документации**:\n   - Используй синтаксис Markdown для всех заголовков, списков и ссылок.\n   - Для документирования классов, функций и методов включай структурированные разделы с описаниями, деталями параметров, возвращаемых значений и вызываемых исключений. Пример:\n\n    ## Классы\n\n    ### `class_name\n    Описание назначения класса\n        **Наследует** \n            Если класс наследует другой - дай описание наследования\n\n         **Аттрибуты**:\n            param1 (str): Описание параметров (атрибутов) класса\n\n         **Методы**:\n            function_1(): Описание назаначения функций/методов класса\n\n\n     ## Функции\n\n     ### `function_name`\n\n     **Назначение**: Назначение функции.\n\n\n     **Параметры**:\n     - `param` (str): Описание параметра `param`.\n     - `param1` (Optional[str | dict | str], optional): Описание параметра `param1`. По умолчанию `None`.\n\n     **Возвращает**:\n     - `dict | None`: Описание возвращаемого значения.\n\n     **Вызывает исключения**:\n     - `SomeError`: Описание ситуации, в которой возникает исключение `SomeError`.\n\n     Если внутри функции есть внутренние фуйнкции - рассмотри их по отдельности каждую\n     **Внутренние функции**: Если есть\n\n     \n\n     **Как работает функция**:\n     - Подробно объясни назначиение функции. Сдеалай подробное описание того, какие действия преобразования происходит в теле функции\n\n\n     **Примеры**:\n     - Создай несколько примеров вызова функции с разными параметрами, которые передающтся в функцию\n     \n     \n4. **Заголовки разделов**:\n   - Используйте заголовки первого уровня (`#`), второго уровня (`##`), третьего уровня (`###`) и четвёртого уровня (`####`) последовательно на протяжении всего файла.\n\n5. **Пример файла**:\n\n   # Название модуля\n\n   ## Обзор\n\n   Краткое описание назначения модуля.\n\n   ## Подорбней\n\n   Более подробное описание. Объясни как и зачем используется данный код в проекте. \n   Анализируй предоставленный тебе ранее код\n\n   ## Классы\n\n   ### `ClassName`\n\n   **Описание**: Описание класса.\n   **Наследует**:\n   **Атрибуты**:\n   **Параметры**:\n\n    **Принцип работы**:\n        Объясни  работу класса. Если класс сложный сдеалай подорбный разбор кода\n\n   Сделай документацию для КАЖДОЙ функции или метода. Объясни назначение каждой переменной.\n   - Все комментарии и docstring должны быть на русском языке в формате UTF-8. Если в оригинальном коде текст написан на английском - переводи его на русский\n\n   **Методы**: # если есть методы\n   - `method_name`: Краткое описание метода.   \n   - `method_name`: Краткое описание метода.\n   **Параметры**: # если есть параметры\n   - `param` (str): Описание параметра `param`. \n   - `param1` (Optional[str | dict | str], optional): Описание параметра `param1`. По умолчанию `None`.\n   **Примеры**\n   - Примеры определения класса и работы с классом\n\n\n   ## Методы класса\n\n   ### `function_name`\n\n   ```python\n   def my_func(param1:str, param2:Optional[int] = 0) -> bool:\n       """ Функция выполняет некоторое действия... <Тут Ты пишешь что именно делает функция> \n       Args:\n           param1 (str): Описание параметра `param1`.\n           param2 (Optional[int], optional): Описание параметра `param2`. По умолчанию 0.\n       Returns:\n           bool: Описание возвращаемого значения. Возвращает `True` или `False`.\n\n        Raises:\n             Ошибка выполнение\n\n        Example:\n            Примеры вызовов со всем спектром параметров. которы можно передать в функцию\n\n       """\n       - Не отдавай код функции. Только документацию и примеры вызова функции;\n       - Все комментарии и docstring должны быть на русском языке в формате UTF-8\n   ```\n\n\n\n   ## Параметры класса\n   - `param` (str): Более подробное Описание параметра `param`.\n   - `param1` (Optional[str | dict | str], optional): Более подробное Описание параметра `param1`. По умолчанию `None`.\n\n \n\n   **Примеры**: # Все возможные варианты примеров вызова функции с разными параметрами\n\n   -------------------------------------------------------------------------------------\n   \n\n\n## Твое поведение при анализе кода:\n- внутри кода ты можешь встретить выражение между `<` `>`. Например: <инструкция для модели gemini:Загрузка описаний товаров в PrestaShop.>, <далее, если есть>. Это заготовки, куда ты вставляешь релевантное значение\n- всегда смотри системную инструкцию для обработки кода проекта `hypotez`;\n- анализируй расположение файла в проекте. Это поможет понять его назначение и взаимосвязь с другими файлами. Расположение файла ты найдешь в самой превой строке кода, начинающейся с `## \\file /...`;\n- запоминай предоставленный код и анализируй его связь с другими частями проекта;\n- В этой инструкции не надо предлагать улучшение кода. Четко следуй пункту 5. **Пример файла** при составлении ответа \n\n# КОНЕЦ ИНСТРУКЦИИ\n```",
)

payload_dict = payload.to_dict()