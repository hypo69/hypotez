# Модуль для получения грабера на основе URL поставщика

## Обзор

Модуль `get_graber_by_supplier` предоставляет функциональность для получения соответствующего объекта грабера для заданного URL поставщика. У каждого поставщика есть свой собственный грабер, который извлекает значения полей с целевой HTML-страницы. Модуль использует классы граберов, определенные в модулях `src.suppliers.suppliers_list.*.graber`.

## Детали

Этот модуль предназначен для определения соответствующего грабера для URL поставщика. 
Он предоставляет две функции:

1. `get_graber_by_supplier_url(driver: Driver, url: str, lang_index: int) -> Graber | None`: 
    - Возвращает соответствующий грабер для заданного URL поставщика.
    - Используется для определения грабера на основе полного URL-адреса.
    - Принимает объект WebDriver, URL и индекс языка.
    - Проверяет начало URL на соответствие доменам поставщиков и возвращает соответствующий объект грабера. 
2. `get_graber_by_supplier_prefix(driver: Driver, supplier_prefix: str, lang_index: int = 2) -> Graber | None`:
    - Возвращает соответствующий грабер по префиксу имени поставщика.
    - Используется для определения грабера на основе префикса URL-адреса.
    - Принимает объект WebDriver, префикс поставщика (в нижнем регистре) и индекс языка.
    - Проверяет префикс на соответствие именам поставщиков и возвращает соответствующий объект грабера.

## TOC

- **Функции:**
    - `get_graber_by_supplier_url`
    - `get_graber_by_supplier_prefix`

## Функции

### `get_graber_by_supplier_url`

**Цель**:  Функция возвращает соответствующий грабер для заданного URL поставщика.

**Параметры**:

- `driver` (Driver): Экземпляр веб-драйвера для взаимодействия со страницей.
- `url` (str): URL страницы поставщика.
- `lang_index` (int): Индекс языка в магазине Prestashop (например, для локализации).

**Возвращает**:

- `Graber | None`: Экземпляр соответствующего класса Graber, если совпадение найдено, иначе None.

**Примеры**:

```python
from src.webdriver import Driver # Пример импорта
driver_instance = Driver() # Пример создания экземпляра
supplier_url = 'https://ksp.co.il/item/12345'
lang_id = 2
grabber_instance = get_graber_by_supplier_url(driver_instance, supplier_url, lang_id)
if grabber_instance:
    print(f'Grabber found: {type(grabber_instance).__name__}')
# Вывод: Grabber found: KspGraber
```

**Как работает функция**:

- Функция сначала переходит по URL с помощью драйвера.
- Затем она последовательно проверяет начало URL на соответствие спискам доменов, связанных с каждым поставщиком. 
- Если найден совпадающий префикс, возвращается объект грабера, соответствующий данному поставщику.
- Если совпадение не найдено, функция выводит сообщение в лог и возвращает `None`.

### `get_graber_by_supplier_prefix`

**Цель**:  Функция возвращает соответствующий грабер по префиксу имени поставщика.

**Параметры**:

- `driver` (Driver): Экземпляр веб-драйвера.
- `supplier_prefix` (str): Строковый префикс или идентификатор поставщика (в нижнем регистре).
- `lang_index` (int, optional): Индекс языка. По умолчанию 2.

**Возвращает**:

- `Graber | None`: Экземпляр соответствующего класса Graber, если префикс совпадает, иначе None.

**Примеры**:

```python
from src.webdriver import Driver # Пример импорта
driver_instance = Driver() # Пример создания экземпляра
prefix = 'ksp'
lang_id = 2
grabber_instance = get_graber_by_supplier_prefix(driver_instance, prefix, lang_id)
if grabber_instance:
    print(f'Grabber found: {type(grabber_instance).__name__}')
# Вывод: Grabber found: KspGraber
```

**Как работает функция**:

- Функция принимает строку префикса поставщика в нижнем регистре.
- Затем она последовательно сравнивает полученный префикс с именами поставщиков.
- Если совпадение найдено, возвращается объект грабера, соответствующий данному поставщику.
- Если совпадение не найдено, функция выводит сообщение в лог и возвращает `None`.

## Дополнительные сведения

- Модуль `get_graber_by_supplier` использует словарь `graber_classes` для сопоставления имен поставщиков с соответствующими классами граберов.
- Классы граберов должны иметь метод `get_product_data()`, который извлекает данные о товаре с целевой HTML-страницы.
-  Вместо `Union[]` используйте `|` в аннотациях типов.
- Используйте функцию `logger.debug` для вывода сообщений в лог, чтобы отслеживать работу модуля.